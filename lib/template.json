{ "type": "Program"
, "body":
  [ { "type": "ParenthesizedExpression"
    , "expression":
      { "type": "CallExpression"
      , "expression":
        { "type": "FunctionExpression"
        , "id": null
        , "params":
          [ { "type": "Identifier"
            , "name": "global"
            }
          , { "type": "Identifier"
            , "name": "factory"
            }
          ]
        , "defaults": []
        , "rest":null
        , "generator":false
        , "body":
          { "type": "BlockStatement"
          , "body":
            [ { "type": "IfStatement"
              , "test":
                { "type": "LogicalExpression"
                , "left":
                  { "type": "BinaryExpression"
                  , "left":
                    { "type": "UnaryExpression"
                    , "operator": "typeof"
                    , "prefix": true
                    , "argument":
                      { "type": "Identifier"
                      , "name": "define"
                      }
                    }
                  , "operator": "==="
                  , "right":
                    { "type": "Literal"
                    , "value": "function"
                    }
                  }
                , "operator": "&&"
                , "right":
                  { "type": "MemberExpression"
                  , "object":
                    { "type": "Identifier"
                    , "name": "define"
                    }
                  , "property":
                    { "type": "Identifier"
                    , "name": "amd"
                    }
                  , "computed": false
                  }
                }
              , "consequent":
                { "type": "BlockStatement"
                , "body":
                  [ { "type": "ExpressionStatement"
                    , "expression":
                      { "type": "CallExpression"
                      , "callee":
                        { "type": "Identifier"
                        , "name": "define"
                        }
                      , "arguments":
                        [ { "type": "Identifier"
                          , "name": "AMD_ARGUMENTS"
                          }
                        , { "type": "Identifier"
                          , "name": "factory"
                          }
                        ]
                      }
                    }
                  ]
                }
              , "alternate":
                { "type": "IfStatement"
                , "test":
                  { "type": "BinaryExpression"
                  , "left":
                    { "type": "UnaryExpression"
                    , "operator": "typeof"
                    , "prefix": true
                    , "argument":
                      { "type": "Identifier"
                      , "name": "exports"
                      }
                    }
                  , "operator": "!=="
                  , "right":
                    { "type": "Literal"
                    , "value": "undefined"
                    }
                  }
                , "consequent":
                  { "type": "BlockStatement"
                  , "body":
                    [ { "type": "ExpressionStatement"
                      , "expression":
                        { "type": "CallExpression"
                        , "callee":
                          { "type": "Identifier"
                          , "name": "factory"
                          }
                        , "arguments":
                          [ { "type": "Identifier"
                            , "name": "exports"
                            }
                          , { "type": "Identifier"
                            , "name": "COMMON_ARGUMENTS"
                            }
                          ]
                        }
                      }
                    ]
                  }
                , "alternate":
                  { "type": "BlockStatement"
                  , "body":
                    [ { "type": "ExpressionStatement"
                      , "expression":
                        { "type": "CallExpression"
                        , "callee":
                          { "type": "Identifier"
                          , "name": "factory"
                          }
                        , "arguments":
                          [ { "type": "Identifier"
                            , "name": "global"
                            }
                          , { "type": "Identifier"
                            , "name": "GLOBAL_ARGUMENTS"
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        , "expression": false
        }
      }
    }
  ]
}
